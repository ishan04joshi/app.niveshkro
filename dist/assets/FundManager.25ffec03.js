var Se=Object.defineProperty,Ce=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var K=(d,o,g)=>o in d?Se(d,o,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[o]=g,p=(d,o)=>{for(var g in o||(o={}))Fe.call(o,g)&&K(d,g,o[g]);if(Z)for(var g of Z(o))be.call(o,g)&&K(d,g,o[g]);return d},u=(d,o)=>Ce(d,fe(o));import{D as q}from"./chakra-ui-icons.esm.135d50ad.js";import{m as oe,S as a,B as A,g as xe,u as ze,r as i,h as De,az as ee,j as t,d as n,H as m,e as y,i as Me,E as we,l,p as v,o as Ye,t as Ie,aa as ke,T as c,Q as Ee,aA as Re,aB as ne,I as s,a8 as te,aC as ae,v as w,aD as Ae,aE as Ne,P as Ge,bD as Te,bw as He}from"./index.996e1d78.js";import{T as re}from"./index.esm.d5df6859.js";const ie=oe(a),Pe=oe(A),Be={hidden:{scale:0},animate:{scale:1,transition:{staggerChildren:.5,delayChildren:.4}}},Ue={hidden:{opacity:0},animate:{opacity:1}},We=()=>{const d=xe(),o=ze(),[g,N]=i.exports.useState(null),[Y,le]=i.exports.useState(1),[I,se]=i.exports.useState(10),[k,ce]=i.exports.useState([]);i.exports.useState(null),i.exports.useState(null),i.exports.useState(!1),i.exports.useState(!1),De();const[b,G]=i.exports.useState("update"),[T,H]=i.exports.useState("HIGH"),[h,F]=i.exports.useState([]),[P,de]=i.exports.useState("SHORT"),B=ee.useRef(null),U=ee.useRef(null),[x,E]=i.exports.useState(null),[z,R]=i.exports.useState(null),[ge,O]=i.exports.useState(""),[he,L]=i.exports.useState(""),[pe,j]=i.exports.useState(""),[ue,_]=i.exports.useState(0),[D,M]=i.exports.useState({oneYear:0,threeYears:0,fiveYears:0}),[S,C]=i.exports.useState({threeMonths:0,sixMonths:0,oneYear:0,threeYears:0,fiveYears:0}),me=()=>{O(""),L(""),j(""),_(0),M({oneYear:0,threeYears:0,fiveYears:0}),C({threeMonths:0,sixMonths:0,oneYear:0,threeYears:0,fiveYears:0}),E(null),R(null),N(null),F([]),H("HIGH")},ye=async()=>{try{const e=new FormData;e.append("name",ge),e.append("description",he),e.append("shortDescription",pe),e.append("minimumInvestment",ue),e.append("riskCategory",T),e.append("duration",P),e.append("cagr",JSON.stringify(D)),e.append("returns",JSON.stringify(S)),e.append("dailyChangeFile",x),e.append("fundGraphFile",z),e.append("shares",JSON.stringify(h)),e.append("fundImageFile",g);const{data:r}=await Te(e);console.log(r),r.status&&(o({title:"Fund Created Successfully",status:"success",duration:5e3,isClosable:!0,position:"bottom-right"}),me()),r.status||o({title:r.message,status:"error",duration:5e3,isClosable:!0,position:"bottom-right"})}catch(e){o({title:"Error",description:e.message,status:"error",duration:9e3,isClosable:!0})}},ve=async()=>{try{const{data:e}=await He(Y,I);if(e.status)return ce(e.data),o({title:"Success",description:e.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"})}catch(e){console.log(e),o({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}};return i.exports.useEffect(()=>{ve()},[Y,I]),t(A,{sx:{minHeight:"90vh",display:"flex",flexDirection:"column",pb:4},children:[t(a,{direction:"row",spacing:1,justifyContent:"space-between",children:[n(m,{fontSize:"4xl",mb:5,children:"CREATE / UPDATE FUNDS"}),b==="create"?n(y,{sx:{alignSelf:"center"},variant:"outline",onClick:()=>G("update"),children:"Update Funds"}):n(y,{colorScheme:"blue",sx:{alignSelf:"center"},onClick:()=>G("create"),children:"Add New Fund"})]}),b==="update"&&t(ie,{variants:Be,initial:"hidden",animate:"animate",direction:"column",spacing:2,sx:{px:{sm:2,lg:6},pt:4},children:[k.length===0&&t(a,{direction:"column",spacing:3,justifyContent:"center",alignItems:"center",h:"80vh",children:[n(Me,{animationData:we,autoPlay:!0,loop:!0,style:{height:"60vh",width:"60vw"}}),n(m,{children:"No funds Found"})]}),k.map((e,r)=>{var f,W,J,V,$,Q,X;return t(Pe,{variants:Ue,px:8,py:4,rounded:"lg",shadow:"lg",bg:l("white","gray.800"),maxW:"100%",children:[n(v,{size:"md",variant:"solid",variantColor:"green",px:3,bg:e.trending?"green.900":"red.900",color:"gray.100",fontSize:"sm",fontWeight:"700",rounded:"md",children:e.trending?"Trending":"Standard"}),t(a,{direction:"row",spacing:2,mt:2,divider:n(Ye,{}),justifyContent:"space-evenly",children:[t(a,{direction:"column",spacing:1,children:[n(m,{fontSize:"md",children:"Minimum Investment"}),n(m,{fontSize:"sm",children:Ie((e==null?void 0:e.minimumInvestment)||0)})]}),t(a,{direction:"column",spacing:1,children:[n(m,{fontSize:"md",children:"CAGR"}),t(a,{direction:"row",spacing:2,children:[t(v,{size:"sm",variantColor:"green",variant:"solid",children:[(W=(f=e==null?void 0:e.cagr)==null?void 0:f.oneYear)==null?void 0:W.toFixed(2),"%"]}),t(v,{size:"sm",variantColor:"green",variant:"solid",children:[(V=(J=e==null?void 0:e.cagr)==null?void 0:J.threeYears)==null?void 0:V.toFixed(2),"%"]}),t(v,{size:"sm",variantColor:"green",variant:"solid",children:[(Q=($=e==null?void 0:e.cagr)==null?void 0:$.fiveYears)==null?void 0:Q.toFixed(2),"%"]})]})]}),t(a,{direction:"column",spacing:1,children:[n(m,{fontSize:"md",children:"Enrolled By: "}),t(m,{fontSize:"sm",children:[(X=e==null?void 0:e.enrolled)==null?void 0:X.length," People"]})]}),t(a,{direction:"column",spacing:1,children:[t(m,{fontSize:"md",children:["RISK",n("br",{}),"CATEGORY"]}),n(v,{size:"sm",colorScheme:e.riskCategory==="HIGH"&&"red"||e.riskCategory==="MEDIUM"&&"yellow"||e.riskCategory==="LOW"&&"green",children:e==null?void 0:e.riskCategory})]})]}),t(ke,{justifyContent:"space-around",alignItems:"center",mt:4,children:[t(c,{fontSize:"sm",noOfLines:0,color:l("gray.600","gray.400"),children:["Created: ",Ee(e==null?void 0:e.createdAt).format("dddd, DD MMMM YYYY")]}),n(y,{color:l("brand.600","brand.400"),_hover:{bg:"green.700"},size:"sm",variant:"outline",onClick:()=>{d(`/fund/${e._id}`)},children:"Details"}),n(y,{color:l("brand.600","brand.400"),_hover:{bg:"green.700"},size:"sm",variant:"outline",onClick:()=>{d(`/update/fund/${e._id}`)},children:"Update"}),n(y,{color:l("brand.600","brand.400"),_hover:{bg:"green.700"},size:"sm",variant:"outline",onClick:()=>{d(`/buy/${e._id}`)},children:"Buy"})]})]},r+e._id)})]}),b==="create"&&t(ie,{direction:"column",spacing:5,mt:10,children:[n(m,{fontSize:"2xl",color:l("gray.500","gray.200"),children:"Please Fill Below details properly to create a new FUND."}),t(Re,{columns:[1,1,2,2],spacing:5,p:3,children:[n(ne,{children:t(a,{direction:"column",spacing:4,children:[t(a,{direction:"column",spacing:2,children:[t(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:["Fund Name:"," "]}),n(s,{placeholder:"Enter Fund Name",onChange:e=>O(e.target.value),variant:"filled"})]}),t(a,{direction:"column",spacing:2,children:[t(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:["Fund Short Description:"," "]}),n(s,{placeholder:"Enter Fund Short Description",variant:"filled",onChange:e=>j(e.target.value)})]}),t(a,{direction:"column",spacing:2,children:[t(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:["Fund Long Description:"," "]}),n(s,{placeholder:"Enter Fund Long Description",variant:"filled",onChange:e=>L(e.target.value)})]}),t(a,{direction:"column",spacing:2,children:[t(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:["Fund Minimum Investment:"," "]}),n(s,{placeholder:"Enter Fund Minimum Investment",variant:"filled",type:"number",onChange:e=>_(e.target.value)})]}),t(a,{direction:"column",spacing:2,children:[t(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:["Fund Risk Category:"," "]}),n(a,{direction:"row",children:["HIGH","MEDIUM","LOW"].map((e,r)=>t(v,{size:"md",variant:"solid",px:3,py:2,colorScheme:r===0&&"red"||r===1&&"green"||r===2&&"blue",as:"button",onClick:()=>H(e),children:[n(te,{children:e}),e===T&&n(ae,{as:re})]},r+e))})]}),t(a,{direction:"column",spacing:2,children:[t(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:["Fund Duration:"," "]}),n(a,{direction:"row",children:["SHORT","MEDIUM","LONG"].map((e,r)=>t(v,{size:"md",variant:"solid",px:3,py:2,colorScheme:r===0&&"red"||r===1&&"green"||r===2&&"blue",as:"button",onClick:()=>de(e),children:[n(te,{children:e}),e===P&&n(ae,{as:re})]},r+e))})]}),t(a,{direction:"column",spacing:4,children:[t(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:["Fund Shares Allocation:"," "]}),t(a,{direction:"row",spacing:2,children:[n(c,{sx:{alignSelf:"center"},children:"ADD NEW SHARE ALLOCATION"}),n(w,{size:"sm",onClick:()=>F([...h,{name:"",allocation:0}]),children:n(Ae,{})})]}),h.map((e,r)=>n(a,{direction:"column",spacing:4,children:t(a,{direction:"row",spacing:2,children:[n(s,{variant:"filled",placeholder:"Enter Name",value:h[r].name,type:"text",onChange:f=>{e.name=f.target.value,F([...h])}}),n(s,{variant:"filled",placeholder:"Enter Allocation",value:e.allocation,type:"number",onChange:f=>{h[r].allocation=parseFloat(f.target.value),F([...h])}}),r!==0&&n(w,{size:"sm",sx:{alignSelf:"center"},onClick:()=>{h.splice(r,1),F([...h])},children:n(Ne,{})})]})},r))]})]})}),n(ne,{children:t(a,{direction:"column",spacing:4,children:[t(a,{direction:"column",spacing:2,children:[t(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:["Fund CAGR:"," "]}),t(a,{direction:"row",spacing:2,children:[n(s,{placeholder:"1 Yr",variant:"filled",type:"number",onChange:e=>M(u(p({},D),{oneYear:parseFloat(e.target.value)}))}),n(s,{placeholder:"3 Yrs",onChange:e=>M(u(p({},D),{threeYears:parseFloat(e.target.value)})),variant:"filled",type:"number"}),n(s,{placeholder:"5 Yrs",variant:"filled",type:"number",onChange:e=>M(u(p({},D),{fiveYears:parseFloat(e.target.value)}))})]})]}),t(a,{direction:"column",spacing:2,children:[t(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:["Fund Returns:"," "]}),t(a,{direction:"row",spacing:2,children:[n(s,{placeholder:"3 Months",onChange:e=>C(u(p({},S),{threeMonths:parseFloat(e.target.value)})),variant:"filled",type:"number"}),n(s,{placeholder:"6 Months",onChange:e=>C(u(p({},S),{sixMonths:parseFloat(e.target.value)})),variant:"filled",type:"number"})]}),t(a,{direction:"row",spacing:2,children:[n(s,{placeholder:"1 Yr",variant:"filled",type:"number",onChange:e=>C(u(p({},S),{oneYear:parseFloat(e.target.value)}))}),n(s,{placeholder:"3 Yrs",variant:"filled",type:"number",onChange:e=>C(u(p({},S),{threeYears:parseFloat(e.target.value)}))}),n(s,{placeholder:"5 Yrs",variant:"filled",type:"number",onChange:e=>C(u(p({},S),{fiveYears:parseFloat(e.target.value)}))})]})]}),t(a,{direction:"column",spacing:2,children:[n(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:"Fund Daily Change File: (.csv files only, MAX SIZE: 2MB)"}),n(s,{ref:B,display:"none","aria-hidden":"true",accept:".csv",type:"file",onChange:e=>{if(e.target.files.length>0&&e.target.files[0].size>2e6)return o({title:"File size is too large",description:"Please upload a file less than 2MB",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});E(e.target.files[0])}}),t(a,{spacing:2,direction:"row",children:[t(c,{color:l("gray.600","gray.200"),alignSelf:"center",children:["Uploaded: ",x&&x.name]}),x&&n(w,{onClick:()=>E(null),children:n(q,{})})]}),n(y,{variant:"outline",onClick:()=>B.current.click(),children:"Upload File"})]}),t(a,{direction:"column",spacing:2,children:[n(c,{fontSize:"lg",color:l("gray.500","gray.400"),children:"Fund Graph File: (.csv files only, MAX SIZE: 2MB)"}),n(s,{ref:U,display:"none","aria-hidden":"true",accept:".csv",type:"file",onChange:e=>{if(e.target.files.length>0&&e.target.files[0].size>2e6)return o({title:"File size is too large",description:"Please upload a file less than 2MB",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});R(e.target.files[0])}}),t(a,{spacing:2,direction:"row",children:[t(c,{color:l("gray.600","gray.200"),alignSelf:"center",children:["Uploaded: ",z&&z.name]}),z&&n(w,{onClick:()=>R(null),children:n(q,{})})]}),n(y,{variant:"outline",onClick:()=>U.current.click(),children:"Upload File"})]}),n(a,{spacing:2,children:n(s,{type:"file",onChange:e=>N(e.target.files[0])})}),n(y,{variant:"outline",onClick:ye,children:"CREATE FUND"})]})})]})]}),b==="update"&&n(A,{sx:{},children:k.length>0&&n(Ge,{defaultPageSize:I,defaultPage:Y,total:500,paginationProps:{display:"flex",justifyContent:"center",marginTop:"2em"},pageNeighbours:1,showQuickJumper:!0,responsive:!0,onChange:e=>le(e),onShowSizeChange:(e,r)=>se(parseFloat(r)),showSizeChanger:!0})})]})};export{We as default};
