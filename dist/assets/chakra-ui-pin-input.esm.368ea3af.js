import{aU as se,ad as ie,aV as le,_ as ce,aR as de,r as l,Y as ve,am as pe,a2 as fe,a4 as xe,aW as ge,aX as he,an as b,aY as me,al as F}from"./index.996e1d78.js";function m(){return m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},m.apply(this,arguments)}function w(t,e){if(t==null)return{};var r={},o=Object.keys(t),i,c;for(c=0;c<o.length;c++)i=o[c],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Pe=["index"],S=se(),Ce=S[0],Ie=S[2],_e=S[3],q=ie({name:"PinInputContext",errorMessage:"usePinInputContext: `context` is undefined. Seems you forgot to all pin input fields within `<PinInput />`"}),ye=q[0],be=q[1],z=function(e){return e==null?void 0:e.split("")};function Z(t,e){var r=/^[0-9]+$/,o=/^[a-zA-Z0-9]+$/i,i=e==="alphanumeric"?o:r;return i.test(t)}function Fe(t){t===void 0&&(t={});var e=t,r=e.autoFocus,o=e.value,i=e.defaultValue,c=e.onChange,d=e.onComplete,P=e.placeholder,C=P===void 0?"\u25CB":P,I=e.manageFocus,f=I===void 0?!0:I,V=e.otp,j=V===void 0?!1:V,N=e.id,B=e.isDisabled,K=e.isInvalid,M=e.type,g=M===void 0?"number":M,O=e.mask,J=ge(),k=N!=null?N:"pin-input-"+J,s=Ie(),T=l.exports.useState(!0),U=T[0],A=T[1],X=l.exports.useState(-1),G=X[0],H=X[1],L=he({defaultValue:z(i)||[],value:z(o),onChange:function(n){return c==null?void 0:c(n.join(""))}}),x=L[0],v=L[1];l.exports.useEffect(function(){if(r){var a=s.first();a&&b(a.node,{nextTick:!0})}},[s]);var W=l.exports.useCallback(function(a){if(!(!U||!f)){var n=s.next(a,!1);n&&b(n.node,{nextTick:!0})}},[s,U,f]),h=l.exports.useCallback(function(a,n){var u=[].concat(x);u[n]=a,v(u);var D=a!==""&&u.length===s.count()&&u.every(function(_){return _!=null&&_!==""});D?d==null||d(u.join("")):W(n)},[x,v,W,d,s]),Q=l.exports.useCallback(function(){var a=Array(s.count()).fill("");v(a);var n=s.first();n&&b(n.node)},[s,v]),Y=l.exports.useCallback(function(a,n){var u=n;return(a==null?void 0:a.length)>0&&(a[0]===n.charAt(0)?u=n.charAt(1):a[0]===n.charAt(1)&&(u=n.charAt(0))),u},[]),ee=l.exports.useCallback(function(a){var n=a.index,u=w(a,Pe),D=function(y){var p=y.target.value,oe=x[n],R=Y(oe,p);if(R===""){h("",n);return}if(p.length>2){if(Z(p,g)){var $=p.split("").filter(function(Ee,ue){return ue<s.count()});v($),$.length===s.count()&&(d==null||d($.join("")))}}else Z(R,g)&&h(R,n),A(!0)},_=function(y){if(y.key==="Backspace"&&f)if(y.target.value===""){var p=s.prev(n,!1);p&&(h("",n-1),b(p.node),A(!0))}else A(!1)},ne=function(){H(n)},te=function(){H(-1)},ae=G===n,re=g==="number"?"tel":"text";return m({"aria-label":"Please enter your pin code",inputMode:g==="number"?"numeric":"text",type:O?"password":re},u,{id:k+"-"+n,disabled:B,"aria-invalid":me(K),onChange:F(u.onChange,D),onKeyDown:F(u.onKeyDown,_),onFocus:F(u.onFocus,ne),onBlur:F(u.onBlur,te),value:x[n]||"",autoComplete:j?"one-time-code":"off",placeholder:ae?"":C})},[s,G,Y,k,B,O,K,f,d,j,C,h,v,g,x]);return{getInputProps:ee,id:k,descendants:s,values:x,setValue:h,setValues:v,clear:Q}}function ke(t,e){t===void 0&&(t={}),e===void 0&&(e=null);var r=be(),o=r.getInputProps,i=_e(),c=i.index,d=i.register;return o(m({},t,{ref:pe(d,e),index:c}))}var Ae=["children"],De=["descendants"],$e=function(e){var r=le("PinInput",e),o=ce(e),i=o.children,c=w(o,Ae),d=Fe(c),P=d.descendants,C=w(d,De),I=de(i).map(function(f){return l.exports.cloneElement(f,{__css:r})});return l.exports.createElement(Ce,{value:P},l.exports.createElement(ye,{value:C},I))},we=ve(function(t,e){var r=ke(t,e);return l.exports.createElement(fe.input,m({},r,{className:xe("chakra-pin-input",t.className)}))});export{$e as P,we as a};
