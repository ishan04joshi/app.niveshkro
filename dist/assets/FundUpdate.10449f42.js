var Xe=Object.defineProperty,Je=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var Se=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,ea=Object.prototype.propertyIsEnumerable;var De=(l,n,i)=>n in l?Xe(l,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[n]=i,R=(l,n)=>{for(var i in n||(n={}))Qe.call(n,i)&&De(l,i,n[i]);if(Se)for(var i of Se(n))ea.call(n,i)&&De(l,i,n[i]);return l},A=(l,n)=>Je(l,Ze(n));import{D as Fe}from"./chakra-ui-icons.esm.135d50ad.js";import{ad as aa,a2 as de,Y as na,Z as ta,_ as ra,ae as ia,r as o,a4 as oa,af as la,ag as sa,ah as pe,ai as ge,aj as Ie,ak as ca,a3 as F,al as E,am as Pe,an as da,ao as ua,m as ue,ap as ha,aq as pa,d as a,ar as Le,j as r,as as Ne,at as Ue,au as le,av as se,aw as Oe,ax as ce,Q as ve,S as d,B as oe,g as ga,ay as va,u as ma,az as Ee,H as Me,l as x,aA as fa,aB as we,T as C,I as m,p as Te,a8 as _e,aC as Ye,v as ze,aD as Ca,aE as ya,e as T,aF as Re,aG as ba,aH as ka}from"./index.996e1d78.js";import{T as Ae}from"./index.esm.d5df6859.js";import{S as Be}from"./ScrollModal.27469081.js";function y(){return y=Object.assign||function(l){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(l[h]=i[h])}return l},y.apply(this,arguments)}var xa=aa({name:"CheckboxGroupContext",strict:!1}),Sa=xa[1];function me(l,n){if(l==null)return{};var i={},h=Object.keys(l),g,c;for(c=0;c<h.length;c++)g=h[c],!(n.indexOf(g)>=0)&&(i[g]=l[g]);return i}var Da=["isIndeterminate","isChecked"];function Fa(l){var n=ue;return"custom"in n&&typeof n.custom=="function"?n.custom(l):n(l)}var He=Fa(de.svg),Ia=function(n){return o.exports.createElement(He,y({width:"1.2em",viewBox:"0 0 12 10",variants:{unchecked:{opacity:0,strokeDashoffset:16},checked:{opacity:1,strokeDashoffset:0,transition:{duration:.2}}},style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16}},n),o.exports.createElement("polyline",{points:"1.5 6 4.5 9 10.5 1"}))},Pa=function(n){return o.exports.createElement(He,y({width:"1.2em",viewBox:"0 0 24 24",variants:{unchecked:{scaleX:.65,opacity:0},checked:{scaleX:1,opacity:1,transition:{scaleX:{duration:0},opacity:{duration:.02}}}},style:{stroke:"currentColor",strokeWidth:4}},n),o.exports.createElement("line",{x1:"21",x2:"3",y1:"12",y2:"12"}))},Ea=function(n){var i=n.open,h=n.children;return o.exports.createElement(ha,{initial:!1},i&&o.exports.createElement(ue.div,{variants:{unchecked:{scale:.5},checked:{scale:1}},initial:"unchecked",animate:"checked",exit:"unchecked",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},h))},Ma=function(n){var i=n.isIndeterminate,h=n.isChecked,g=me(n,Da),c=i?Pa:Ia;return o.exports.createElement(Ea,{open:h||i},o.exports.createElement(c,g))},wa=["defaultChecked","isChecked","isFocusable","onChange","isIndeterminate","name","value","tabIndex","aria-label","aria-labelledby","aria-invalid"];function Ta(l){l===void 0&&(l={});var n=la(l),i=n.isDisabled,h=n.isReadOnly,g=n.isRequired,c=n.isInvalid,j=n.id,X=n.onBlur,t=n.onFocus,B=n["aria-describedby"],v=l,$=v.defaultChecked,S=v.isChecked,_=v.isFocusable,J=v.onChange,I=v.isIndeterminate,Z=v.name,G=v.value,L=v.tabIndex,Q=L===void 0?void 0:L,M=v["aria-label"],Y=v["aria-labelledby"],b=v["aria-invalid"],D=me(v,wa),N=sa(D,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),U=pe(J),K=pe(X),V=pe(t),q=ge(),O=q[0],z=q[1],ne=ge(),ee=ne[0],ae=ne[1],w=ge(),H=w[0],p=w[1],f=o.exports.useRef(null),ie=o.exports.useState(!0),te=ie[0],e=ie[1],u=o.exports.useState(!!$),re=u[0],he=u[1],fe=pa(S,re),Ce=fe[0],P=fe[1],ye=o.exports.useCallback(function(s){if(h||i){s.preventDefault();return}Ce||he(P?s.target.checked:I?!0:s.target.checked),U==null||U(s)},[h,i,P,Ce,I,U]);Ie(function(){f.current&&(f.current.indeterminate=Boolean(I))},[I]),ca(function(){i&&z.off()},[i,z]);var be=i&&!_,ke=o.exports.useCallback(function(s){s.key===" "&&p.on()},[p]),xe=o.exports.useCallback(function(s){s.key===" "&&p.off()},[p]);Ie(function(){if(!!f.current){var s=f.current.checked!==P;s&&he(f.current.checked)}},[f.current]);var je=o.exports.useCallback(function(s,k){s===void 0&&(s={}),k===void 0&&(k=null);var W=function(We){We.preventDefault(),p.on()};return y({},s,{ref:k,"data-active":F(H),"data-hover":F(ee),"data-checked":F(P),"data-focus":F(O),"data-indeterminate":F(I),"data-disabled":F(i),"data-invalid":F(c),"data-readonly":F(h),"aria-hidden":!0,onMouseDown:E(s.onMouseDown,W),onMouseUp:E(s.onMouseUp,p.off),onMouseEnter:E(s.onMouseEnter,ae.on),onMouseLeave:E(s.onMouseLeave,ae.off)})},[H,P,i,O,ee,I,c,h,p,ae.off,ae.on]),$e=o.exports.useCallback(function(s,k){return s===void 0&&(s={}),k===void 0&&(k=null),y({},N,s,{ref:Pe(k,function(W){!W||e(W.tagName==="LABEL")}),onClick:E(s.onClick,function(){if(!te){var W;(W=f.current)==null||W.click(),da(f.current,{nextTick:!0})}}),"data-disabled":F(i),"data-checked":F(P),"data-invalid":F(c)})},[N,i,P,c,te]),Ke=o.exports.useCallback(function(s,k){return s===void 0&&(s={}),k===void 0&&(k=null),y({},s,{ref:Pe(f,k),type:"checkbox",name:Z,value:G,id:j,tabIndex:Q,onChange:E(s.onChange,ye),onBlur:E(s.onBlur,K,z.off),onFocus:E(s.onFocus,V,z.on),onKeyDown:E(s.onKeyDown,ke),onKeyUp:E(s.onKeyUp,xe),required:g,checked:P,disabled:be,readOnly:h,"aria-label":M,"aria-labelledby":Y,"aria-invalid":b?Boolean(b):c,"aria-describedby":B,"aria-disabled":i,style:ua})},[Z,G,j,ye,z.off,z.on,K,V,ke,xe,g,P,be,h,M,Y,b,c,B,i,Q]),Ve=o.exports.useCallback(function(s,k){return s===void 0&&(s={}),k===void 0&&(k=null),y({},s,{ref:k,onMouseDown:E(s.onMouseDown,Ge),onTouchStart:E(s.onTouchStart,Ge),"data-disabled":F(i),"data-checked":F(P),"data-invalid":F(c)})},[P,i,c]),qe={isInvalid:c,isFocused:O,isChecked:P,isActive:H,isHovered:ee,isIndeterminate:I,isDisabled:i,isReadOnly:h,isRequired:g};return{state:qe,getRootProps:$e,getCheckboxProps:je,getInputProps:Ke,getLabelProps:Ve,htmlProps:N}}function Ge(l){l.preventDefault(),l.stopPropagation()}var _a=["spacing","className","children","iconColor","iconSize","icon","isChecked","isDisabled","onChange","inputProps"],Ya=de("span",{baseStyle:{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0}}),za=de("label",{baseStyle:{cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"}}),Ra=na(function(l,n){var i=Sa(),h=y({},i,l),g=ta("Checkbox",h),c=ra(l),j=c.spacing,X=j===void 0?"0.5rem":j,t=c.className,B=c.children,v=c.iconColor,$=c.iconSize,S=c.icon,_=S===void 0?o.exports.createElement(Ma,null):S,J=c.isChecked,I=c.isDisabled,Z=I===void 0?i==null?void 0:i.isDisabled:I,G=c.onChange,L=c.inputProps,Q=me(c,_a),M=J;i!=null&&i.value&&c.value&&(M=i.value.includes(c.value));var Y=G;i!=null&&i.onChange&&c.value&&(Y=ia(i.onChange,G));var b=Ta(y({},Q,{isDisabled:Z,isChecked:M,onChange:Y})),D=b.state,N=b.getInputProps,U=b.getCheckboxProps,K=b.getLabelProps,V=b.getRootProps,q=o.exports.useMemo(function(){return y({opacity:D.isChecked||D.isIndeterminate?1:0,transform:D.isChecked||D.isIndeterminate?"scale(1)":"scale(0.95)",fontSize:$,color:v},g.icon)},[v,$,D.isChecked,D.isIndeterminate,g.icon]),O=o.exports.cloneElement(_,{__css:q,isIndeterminate:D.isIndeterminate,isChecked:D.isChecked});return o.exports.createElement(za,y({__css:g.container,className:oa("chakra-checkbox",t)},V()),o.exports.createElement("input",y({className:"chakra-checkbox__input"},N(L,n))),o.exports.createElement(Ya,y({__css:g.control,className:"chakra-checkbox__control"},U()),O),B&&o.exports.createElement(de.span,y({className:"chakra-checkbox__label"},K(),{__css:y({marginStart:X},g.label)}),B))});const Aa=({dailyChange:l})=>a(Le,{children:r(Ne,{size:"sm",children:[a(Ue,{children:r(le,{children:[a(se,{children:"Date:"}),a(se,{children:"Daily Change %"})]})}),a(Oe,{children:l.map(n=>r(le,{children:[a(ce,{children:ve(n.x).format("YYYY-MM-DD")}),r(ce,{children:[n.y,"%"]})]},n.x))})]})}),Ba=({fundGraph:l})=>a(Le,{children:r(Ne,{size:"sm",children:[a(Ue,{children:r(le,{children:[a(se,{children:"Date:"}),a(se,{children:"Fund Value"})]})}),a(Oe,{children:l.map(n=>r(le,{children:[a(ce,{children:ve(n.x).format("YYYY-MM-DD")}),r(ce,{children:[n.y," /-"]})]},n.x))})]})}),Ga=ue(d);ue(oe);const $a=()=>{ga();const l=va(),n=ma();o.exports.useState(1),o.exports.useState(10),o.exports.useState([]);const[i,h]=o.exports.useState(!0),[g,c]=o.exports.useState(!1),[j,X]=o.exports.useState(!1),[t,B]=o.exports.useState(null),[v,$]=o.exports.useState("HIGH"),[S,_]=o.exports.useState([]),J=Ee.useRef(null),[I,Z]=o.exports.useState(0),G=Ee.useRef(null),[L,Q]=o.exports.useState(!1),[M,Y]=o.exports.useState(null),[b,D]=o.exports.useState(null),[N,U]=o.exports.useState(""),[K,V]=o.exports.useState(""),[q,O]=o.exports.useState(""),[z,ne]=o.exports.useState(0),[ee,ae]=o.exports.useState("SHORT"),[w,H]=o.exports.useState({oneYear:0,threeYears:0,fiveYears:0}),[p,f]=o.exports.useState({threeMonths:0,sixMonths:0,oneYear:0,threeYears:0,fiveYears:0}),ie=async()=>{if(!!l.id)try{const{data:e}=await ba(l.id);e.status&&(B(e.data),h(!1)),e.status||n({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}catch(e){console.log(e),n({title:"Error",description:"Could not get fund details",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}},te=async()=>{try{const e=new FormData;e.append("_id",t._id),e.append("todayValue",I),e.append("name",N),e.append("description",K),e.append("duration",ee),e.append("shortDescription",q),e.append("minimumInvestment",z),e.append("cagr",JSON.stringify(w)),e.append("returns",JSON.stringify(p)),e.append("riskCategory",v),e.append("shares",JSON.stringify(S)),e.append("trending",L),M&&e.append("dailyChangeFile",M),b&&e.append("fundGraphFile",b);const{data:u}=await ka(e);u.status&&(B(u.data),Y(null),D(null),n({title:"Success",description:u.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"})),u.status||n({title:"Error",description:u.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}catch(e){console.log("\u{1F680} ~ file: FundUpdate.jsx ~ line 262 ~ handleFundUpdate ~ e",e),n({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}};return o.exports.useEffect(()=>{ie()},[]),o.exports.useEffect(()=>{t!=null&&t.name&&U(t.name),t!=null&&t.description&&V(t.description),t!=null&&t.shortDescription&&O(t.shortDescription),t!=null&&t.minimumInvestment&&ne(t.minimumInvestment),t!=null&&t.riskCategory&&$(t.riskCategory),t!=null&&t.cagr&&H(t.cagr),t!=null&&t.returns&&f(t.returns),t!=null&&t.shares&&_(t.shares)},[t]),r(oe,{sx:{minHeight:"90vh",display:"flex",flexDirection:"column",pb:4},children:[r(Me,{fontSize:"4xl",mb:5,children:["UPDATE FUND: ",t==null?void 0:t.name]}),r(Ga,{direction:"column",spacing:5,mt:10,children:[a(Me,{fontSize:"2xl",color:x("gray.500","gray.200"),children:"Please Fill Below details properly to update the FUND."}),r(fa,{columns:[1,1,2,2],spacing:5,p:3,children:[a(we,{children:r(d,{direction:"column",spacing:4,children:[r(d,{direction:"column",spacing:2,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Fund Name:"," "]}),a(m,{placeholder:"Enter Fund Name",onChange:e=>U(e.target.value),variant:"filled",value:N})]}),r(d,{direction:"column",spacing:2,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Fund Short Description:"," "]}),a(m,{placeholder:"Enter Fund Short Description",variant:"filled",onChange:e=>O(e.target.value),value:q})]}),r(d,{direction:"column",spacing:2,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Fund Long Description:"," "]}),a(m,{placeholder:"Enter Fund Long Description",variant:"filled",onChange:e=>V(e.target.value),value:K})]}),r(d,{direction:"column",spacing:2,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Fund Minimum Investment:"," "]}),a(m,{placeholder:"Enter Fund Minimum Investment",variant:"filled",type:"number",onChange:e=>ne(e.target.value),value:z})]}),r(d,{direction:"row",spacing:2,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Trending:"," "]}),a(Ra,{variant:"filled",checked:L,onChange:()=>Q(!L)})]}),r(d,{direction:"column",spacing:2,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Fund Risk Category:"," "]}),a(d,{direction:"row",children:["HIGH","MEDIUM","LOW"].map((e,u)=>r(Te,{size:"md",variant:"solid",px:3,py:2,colorScheme:u===0&&"red"||u===1&&"green"||u===2&&"blue",as:"button",onClick:()=>$(e),children:[a(_e,{children:e}),e===v&&a(Ye,{as:Ae})]},u))})]}),r(d,{direction:"column",spacing:2,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Fund Duration:"," "]}),a(d,{direction:"row",children:["SHORT","MEDIUM","LONG"].map((e,u)=>r(Te,{size:"md",variant:"solid",px:3,py:2,colorScheme:u===0&&"red"||u===1&&"green"||u===2&&"blue",as:"button",onClick:()=>ae(e),children:[a(_e,{children:e}),e===ee&&a(Ye,{as:Ae})]},u+e))})]}),r(d,{direction:"column",spacing:4,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Fund Shares Allocation:"," "]}),r(d,{direction:"row",spacing:2,children:[a(C,{sx:{alignSelf:"center"},children:"ADD NEW SHARE ALLOCATION"}),a(ze,{size:"sm",onClick:()=>_([...S,{name:"Change Name",allocation:0}]),children:a(Ca,{})})]}),S.map((e,u)=>a(d,{direction:"column",spacing:4,children:r(d,{direction:"row",spacing:2,children:[a(m,{variant:"filled",placeholder:"Enter Name",value:e.name,onChange:re=>{S[u].name=re.target.value,_([...S])}}),a(m,{variant:"filled",placeholder:"Enter Allocation",value:e.allocation,type:"number",onChange:re=>{S[u].allocation=parseFloat(re.target.value),_([...S])}}),u!==0&&a(ze,{size:"sm",sx:{alignSelf:"center"},onClick:()=>{S.splice(u,1),_([...S])},children:a(ya,{})})]})},u+u+1))]})]})}),a(we,{children:r(d,{direction:"column",spacing:4,children:[r(d,{direction:"column",spacing:2,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Fund CAGR:"," "]}),r(d,{direction:"row",spacing:2,children:[a(m,{variant:"filled",type:"number",onChange:e=>H(A(R({},w),{oneYear:parseFloat(e.target.value)})),value:w.oneYear}),a(m,{placeholder:"3 Yrs",onChange:e=>H(A(R({},w),{threeYears:parseFloat(e.target.value)})),value:w.threeYears,variant:"filled",type:"number"}),a(m,{placeholder:"5 Yrs",variant:"filled",type:"number",onChange:e=>H(A(R({},w),{fiveYears:parseFloat(e.target.value)})),value:w.fiveYears})]})]}),r(d,{direction:"column",spacing:2,children:[r(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:["Fund Returns:"," "]}),r(d,{direction:"row",spacing:2,children:[a(m,{placeholder:"3 Months",onChange:e=>f(A(R({},p),{threeMonths:parseFloat(e.target.value)})),variant:"filled",type:"number",value:p.threeMonths}),a(m,{placeholder:"6 Months",onChange:e=>f(A(R({},p),{sixMonths:parseFloat(e.target.value)})),variant:"filled",type:"number",value:p.sixMonths})]}),r(d,{direction:"row",spacing:2,children:[a(m,{placeholder:"1 Yr",variant:"filled",type:"number",onChange:e=>f(A(R({},p),{oneYear:parseFloat(e.target.value)})),value:p.oneYear}),a(m,{placeholder:"3 Yrs",variant:"filled",type:"number",onChange:e=>f(A(R({},p),{threeYears:parseFloat(e.target.value)})),value:p.threeYears}),a(m,{placeholder:"5 Yrs",variant:"filled",type:"number",onChange:e=>f(A(R({},p),{fiveYears:parseFloat(e.target.value)})),value:p.fiveYears})]})]}),a(d,{direction:"column",spacing:2,children:t&&r(oe,{children:[r(d,{direction:"row",spacing:2,sx:{my:4},children:[r(d,{direction:"column",spacing:1,children:[r(C,{children:[ve().format("YYYY-MM-DD")," Value:"]}),a(m,{placeholder:"% Value",onChange:e=>Z(e.target.value),variant:"filled",type:"number",value:I})]}),a(T,{variant:"outline",sx:{alignSelf:"flex-end"},onClick:te,children:"UPDATE Daily Change"})]}),a(T,{variant:"outline",onClick:()=>c(!0),children:"Show Daily Change Table"}),a(Be,{showDailyChange:g,setShowDailyChange:c,dailyChange:t.dailyChange,title:"Daily Change Table",children:a(Aa,{dailyChange:t.dailyChange})})]})}),r(d,{direction:"column",spacing:2,children:[a(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:"Fund Daily Change File: (.csv files only, MAX SIZE: 2MB)"}),a(m,{ref:J,display:"none","aria-hidden":"true",accept:".csv",type:"file",onChange:e=>{if(e.target.files.length>0&&e.target.files[0].size>2e6)return n({title:"File size is too large",description:"Please upload a file less than 2MB",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});Y(e.target.files[0])}}),r(C,{color:x("gray.600","gray.200"),children:["Uploaded: ",M&&M.name]}),M&&a(T,{variant:"outline",leftIcon:a(Fe,{}),onClick:()=>Y(null),children:"DISCARD FILE"}),a(T,{variant:"outline",onClick:()=>J.current.click(),children:"Upload File"}),a(T,{variant:"outline",onClick:()=>window.open(`${Re}/${t._id}/${t.dailyChangeFile}`),children:"Download Current DailyChange File"})]}),r(d,{direction:"column",spacing:2,children:[a(C,{fontSize:"lg",color:x("gray.500","gray.400"),children:"Fund Graph File: (.csv files only, MAX SIZE: 2MB)"}),a(m,{ref:G,display:"none","aria-hidden":"true",accept:".csv",type:"file",onChange:e=>{if(e.target.files.length>0&&e.target.files[0].size>2e6)return n({title:"File size is too large",description:"Please upload a file less than 2MB",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});D(e.target.files[0])}}),a(d,{direction:"column",spacing:2,children:t&&r(oe,{children:[a(T,{variant:"outline",onClick:()=>X(!0),children:"Show Fund Graph Table"}),a(Be,{showDailyChange:j,setShowDailyChange:X,title:"Fund Graph Table",children:a(Ba,{fundGraph:t.fundGraph})})]})}),r(C,{color:x("gray.600","gray.200"),children:["Uploaded: ",b&&b.name]}),b&&a(T,{variant:"outline",leftIcon:a(Fe,{}),onClick:()=>D(null),children:"DISCARD FILE"}),a(T,{variant:"outline",onClick:()=>G.current.click(),children:"Upload File"}),a(T,{variant:"outline",onClick:()=>window.open(`${Re}/${t._id}/${t.fundGraphFile}`),children:"Download Current FundGraph File"})]}),a(T,{variant:"outline",onClick:te,children:"UPDATE FUND"})]})})]})]})]})};export{$a as default};
